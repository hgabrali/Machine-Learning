# ğŸ” Anomaly Detection: An Unsupervised Learning Perspective


<img width="644" height="346" alt="image" src="https://github.com/user-attachments/assets/084ec529-ed61-48e3-a491-043c2885d544" />


Anomaly Detection is the process of identifying data points that significantly **deviate (sapma)** from the expected standard pattern within a **dataset (veri kÃ¼mesi)**. These unusual observations are called **anomalies (anormallikler)** or **outliers (aykÄ±rÄ± deÄŸerler)**.

---

## 1. Types of Anomalies

| Anomaly Type | Description | Example Context |
| :--- | :--- | :--- |
| **Point Anomalies** | Individual data points significantly different from the majority. | A single, extremely large transaction. |
| **Contextual Anomalies** | Anomalous only within a specific **context (baÄŸlam)** (e.g., time, location). | High server load at 3 AM when traffic is typically low. |
| **Collective Anomalies** | A group of data points that are anomalous as a collection, but normal individually. | A sequence of small, coordinated transactions indicating fraud. |

---

## 2. Importance and Distinction

The value in this field lies in finding the exceptions, making it crucial for: **Fraud Detection (DolandÄ±rÄ±cÄ±lÄ±k Tespiti)**, **Cybersecurity (Siber GÃ¼venlik)**, and **Preventive Maintenance (Ã–nleyici BakÄ±m)**.

### Anomaly Detection vs. Supervised Learning

Anomaly Detection is generally an **Unsupervised Learning (Denetimsiz Ã–ÄŸrenme)** problem because:

* Anomalies are **rare (nadir)** and **unlabeled (etiketsiz)**.
* The algorithm learns the characteristics of **"normal behavior" (normal davranÄ±ÅŸ)** and flags anything that deviates from this learned norm.

---

## 3. Techniques for Anomaly Detection

| Technique | Mechanism | Key Advantage |
| :--- | :--- | :--- |
| **Statistical Methods** | Assume data follows a **distribution (daÄŸÄ±lÄ±m)**; anomalies are far from the **mean (ortalama)** (e.g., $\pm 3$ **Standard Deviations**). | Simple and fast. |
| **Clustering-Based** | Use K-Means or DBSCAN. Anomalies are points **far from cluster centers** or not belonging to any dense region. | Effective when normal data forms clear groups. |
| **Isolation Forest** | Randomly splits data to isolate points. Anomalies are isolated faster (shorter path). | Robust and scalable **Machine Learning (Makine Ã–ÄŸrenmesi)** approach. |
| **One-Class SVM** | Learns a tight **boundary (sÄ±nÄ±r)** around the **normal data**. Points outside the boundary are anomalies. | Powerful for complex, non-linear boundaries. |

---

## 4. Key Challenges

* **Imbalanced Data (Dengesiz Veri):** Anomalies are rare compared to normal cases.
* **Evolving Behavior (GeliÅŸen DavranÄ±ÅŸ):** The definition of "normal" can change (**Concept Drift**).
* **False Alarms (YanlÄ±ÅŸ Alarmlar):** Minimizing **False Positives** (yanlÄ±ÅŸ pozitifler) is critical for system reliability.
* **Interpretability (Yorumlanabilirlik):** Explaining *why* a data point was flagged is necessary for action.

---

# TÃœRKCE

---
# ğŸ” Anomali Tespiti AÃ§Ä±klamasÄ±

**Anomali Tespiti (Anomaly Detection)**, bir **veri kÃ¼mesindeki (dataset)** beklenen standart dÃ¼zenden Ã¶nemli Ã¶lÃ§Ã¼de sapan veri noktalarÄ±nÄ± belirlemeye odaklanan, veri biliminde kritik bir gÃ¶revdir. Bu sÄ±ra dÄ±ÅŸÄ± gÃ¶zlemler **anomaliler (anomalies)** veya **aykÄ±rÄ± deÄŸerler (outliers)** olarak bilinir. Anomaliler genellikle sistem arÄ±zalarÄ±, finansal dolandÄ±rÄ±cÄ±lÄ±k veya tÄ±bbi durumlar gibi nadir fakat oldukÃ§a Ã¶nemli sonuÃ§larÄ± olan olaylarÄ± temsil eder.

---

## Anomali TÃ¼rleri

Anomaliler, baÄŸlamlarÄ±na gÃ¶re tipik olarak Ã¼Ã§ ana kategoriye ayrÄ±lÄ±r:

* **Nokta Anormallikleri (Point Anomalies):** Verinin bÃ¼yÃ¼k Ã§oÄŸunluÄŸundan kÃ¶klÃ¼ bir ÅŸekilde farklÄ± olan tekil veri noktalarÄ±dÄ±r. Ã–rneÄŸin, gÃ¼nlÃ¼k iÅŸlemlerin nadiren 500 DolarÄ± aÅŸtÄ±ÄŸÄ± bir veri kÃ¼mesinde, 50.000 DolarlÄ±k tek bir banka iÅŸlemi net bir nokta anomalisidir.
* **BaÄŸlamsal Anormallikler (Contextual Anomalies):** Bir veri noktasÄ±, yalnÄ±zca belirli bir **baÄŸlam (context)** iÃ§inde anormal kabul edilir. Ã–rneÄŸin, saatte 1.000 isabet alan bir web sitesi gÃ¼ndÃ¼z saatlerinde normal olabilir, ancak gece 3'te meydana gelirse baÄŸlamsal bir anomali haline gelir.
* **Toplu Anormallikler (Collective Anomalies):** Bireysel olarak normal gÃ¶rÃ¼nebilen ancak bir grup olarak anormal olan ilgili veri noktalarÄ±nÄ±n bir koleksiyonudur. Ã–rneÄŸin, bir hesabÄ±n bakiyesini toplu olarak boÅŸaltan kÃ¼Ã§Ã¼k, koordineli bir dizi iÅŸlem, zaman serisi verilerinde toplu bir anomaliyi temsil eder.

---

## Anomali Tespiti Neden Kritik?

Bu alanÄ±n Ã¶nemi, **deÄŸerin Ã§oÄŸunlukla istisnalarda yattÄ±ÄŸÄ±, Ã§oÄŸunlukta deÄŸil (the value often lies in the exceptions, not the majority)** gerÃ§eÄŸinden kaynaklanÄ±r. BaÅŸlÄ±ca uygulama alanlarÄ± ÅŸunlardÄ±r:

* **DolandÄ±rÄ±cÄ±lÄ±k Tespiti (Fraud Detection):** Kredi kartÄ±, sigorta veya bankacÄ±lÄ±k iÅŸlemlerindeki ÅŸÃ¼pheli paternleri belirleme.
* **Siber GÃ¼venlik (Cybersecurity):** OlaÄŸandÄ±ÅŸÄ± aÄŸ trafiÄŸini, yetkisiz eriÅŸim giriÅŸimlerini veya kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±m etkinliÄŸini tespit etme.
* **Ã–nleyici BakÄ±m (Preventive Maintenance):** Potansiyel bir ekipman arÄ±zasÄ±na iÅŸaret eden sensÃ¶r verilerindeki (Ã¶rneÄŸin, endÃ¼striyel IoT cihazlarÄ±nda veya araÃ§larda) sapmalarÄ± tespit etme.

---

## Denetimli Ã–ÄŸrenmeden FarkÄ±

Anomali Tespiti, aÄŸÄ±rlÄ±klÄ± olarak bir **Denetimsiz Ã–ÄŸrenme (Unsupervised Learning)** problemi olarak kabul edilir:

* Standart **SÄ±nÄ±flandÄ±rmada (Classification)**, dengeli, **etiketli (labeled)** veriye sahipsiniz (Ã¶rneÄŸin, binlerce spam e-postasÄ± ve binlerce normal e-posta).
* Anomali tespitinde ise anomaliler **nadir (rare)** ve genellikle **etiketsiz (unlabeled)**'dir. OlasÄ± her tÃ¼rlÃ¼ dolandÄ±rÄ±cÄ±lÄ±k veya sistem arÄ±zasÄ±nÄ±n etiketli Ã¶rneklerini elde etmek genellikle imkansÄ±z veya Ã§ok pahalÄ±dÄ±r.

Bu nedenle, algoritma anomali Ã¶rneklerinden Ã¶ÄŸrenmez; bunun yerine **"normal davranÄ±ÅŸÄ±n" (normal behavior)** Ã¶zelliklerini Ã¶ÄŸrenir ve bu Ã¶ÄŸrenilen normdan Ã¶nemli Ã¶lÃ§Ã¼de **sapan (deviates)** herhangi bir gÃ¶zlemi iÅŸaretler.

# ğŸ› ï¸ Temel Anomali Tespiti Teknikleri

"Normal" davranÄ±ÅŸÄ± modellemek ve anomalileri tespit etmek iÃ§in Ã§eÅŸitli metodolojik yaklaÅŸÄ±mlar mevcuttur:

| Teknik Kategori | AÃ§Ä±klama | Temel VarsayÄ±m |
| :--- | :--- | :--- |
| **Ä°statistiksel YÃ¶ntemler (Statistical Methods)** | Verinin belirli bir **daÄŸÄ±lÄ±mÄ± (distribution)** takip ettiÄŸini varsayar, genellikle Gaussian (normal) daÄŸÄ±lÄ±m. Bir eÅŸiÄŸin (Ã¶rn., **3 Standart Sapma - 3 Standard Deviations**) dÄ±ÅŸÄ±na dÃ¼ÅŸen noktalar iÅŸaretlenir. | Veri, varsayÄ±lan olasÄ±lÄ±k daÄŸÄ±lÄ±mÄ±na uymalÄ±dÄ±r. |
| **KÃ¼meleme TabanlÄ± Metotlar (Clustering-Based Methods)** | KÃ¼meleme algoritmalarÄ± (K-Means veya DBSCAN gibi) kullanÄ±lÄ±r. **Anomaliler, herhangi bir kÃ¼me merkezinden uzakta** olan veya herhangi bir yoÄŸun bÃ¶lgeye ait olmayan noktalardÄ±r. | Normal verinin doÄŸal olarak kompakt, iyi ayrÄ±lmÄ±ÅŸ kÃ¼meler oluÅŸturmasÄ±. |
| **Makine Ã–ÄŸrenmesi YÃ¶ntemleri (Machine Learning Methods)** | Normal verinin ÅŸeklini Ã¶ÄŸrenmek iÃ§in Ã¶zelleÅŸmiÅŸ modeller eÄŸitilir. | YÃ¼ksek derecede esnektir, ancak model karmaÅŸÄ±klÄ±ÄŸÄ±na baÄŸlÄ±dÄ±r. |
| **Isolation Forest (Ä°zolasyon OrmanÄ±) ğŸŒ²** | GÃ¶zlemleri **izole etmek** iÃ§in veriyi rastgele bÃ¶ler. Anomaliler, seyrek olduklarÄ± iÃ§in daha hÄ±zlÄ± izole edilir (daha kÄ±sa yol uzunluÄŸu). | Anomaliler azdÄ±r ve verinin Ã§oÄŸunluÄŸundan farklÄ±dÄ±r. |
| **One-Class SVM (Tek SÄ±nÄ±flÄ± Destek VektÃ¶r Makinesi) ğŸ“ˆ** | **TÃ¼m normal veri noktalarÄ±nÄ± kapsayan** sÄ±kÄ± bir **sÄ±nÄ±r (boundary)** Ã¶ÄŸrenir. Bu sÄ±nÄ±rÄ±n dÄ±ÅŸÄ±na dÃ¼ÅŸen herhangi bir nokta anomali olarak iÅŸaretlenir. | Normal verinin, Ã¶zellik uzayÄ±nda bitiÅŸik bir bÃ¶lgeyi kaplamasÄ±. |


# âš™ï¸ Anomali Tespiti: Temel Makine Ã–ÄŸrenmesi AlgoritmalarÄ±

Anomali tespitinde (Anomaly Detection) yaygÄ±n olarak kullanÄ±lan ve farklÄ± mantÄ±klarla Ã§alÄ±ÅŸan iki gÃ¼Ã§lÃ¼ algoritmayÄ± inceleyelim: **Isolation Forest** ve **Local Outlier Factor (LOF)**.

---

## ğŸŒ² 1. Isolation Forest (Ä°zolasyon OrmanÄ±)

Isolation Forest, Ã¶zellikle anomalileri tespit etmek amacÄ±yla oluÅŸturulmuÅŸ **aÄŸaÃ§ tabanlÄ± (tree-based)** bir algoritmadÄ±r.

### Temel Ã‡alÄ±ÅŸma Prensibi

Isolation Forest, veri noktalarÄ±nÄ± **Ã¶zyinelemeli bÃ¶lme (recursive partitioning)** yoluyla izole ederek anomalileri yakalar. Bir noktayÄ± izole etmek iÃ§in ne kadar az bÃ¶lme (split) gerekirse, o noktanÄ±n anomali olma olasÄ±lÄ±ÄŸÄ± o kadar yÃ¼ksektir.

ğŸ‘‰ **Ã‡alÄ±ÅŸma AdÄ±mlarÄ±:**

1.  Rastgele bir **Ã¶zellik (feature)** ve rastgele bir **bÃ¶lme noktasÄ± (split point)** seÃ§ilir.
2.  Veri, sÃ¼rekli olarak daha kÃ¼Ã§Ã¼k gruplara ayrÄ±lÄ±r.
3.  **Anomaliler** (diÄŸerlerinden uzakta, nadir noktalar), hÄ±zlÄ± bir ÅŸekilde izole edilirler; bu da onlarÄ±n daha az bÃ¶lmeye ihtiyaÃ§ duyduÄŸu anlamÄ±na gelir.
4.  Algoritma Ã§ok sayÄ±da aÄŸaÃ§ (forest) inÅŸa eder ve sonuÃ§larÄ± ortalamasÄ±nÄ± alÄ±r. **Daha kÄ±sa yollara (shorter paths)** sahip noktalar anomali olarak iÅŸaretlenir.

> 
> Bir dÃ¼ÅŸÃ¼nÃ¼n: Bir ormanÄ±n kenarÄ±ndaki tek bir aÄŸacÄ± bulmak, ormanÄ±n ortasÄ±ndaki kalabalÄ±k bir aÄŸaÃ§ grubundan rastgele bir aÄŸacÄ± bulmaktan Ã§ok daha kolaydÄ±r. Anomaliler de verinin "kenarÄ±ndaki" aÄŸaÃ§lardÄ±r.

### âš™ï¸ Anahtar Parametreler

Bu parametreler, algoritmanÄ±n Ã§alÄ±ÅŸma ÅŸeklini doÄŸrudan etkiler:

| Parametre | AÃ§Ä±klama |
| :--- | :--- |
| **n\_estimators** | Ormandaki aÄŸaÃ§ sayÄ±sÄ±. (Genellikle 100-500 arasÄ± seÃ§ilir). |
| **max\_samples** | Her aÄŸacÄ± eÄŸitmek iÃ§in kullanÄ±lan veri noktasÄ± sayÄ±sÄ± (Ã–rnekleme boyutu). |
| **contamination** | Veri setinde beklenen aykÄ±rÄ± deÄŸerlerin oranÄ± (%0.1 veya %0.05 gibi). AlgoritmanÄ±n iÅŸaretleyeceÄŸi anomali sayÄ±sÄ±nÄ± belirler. |
| **max\_features** | Her bÃ¶lme iÃ§in dikkate alÄ±nan Ã¶zellik sayÄ±sÄ±. |

### âœ… Neden Isolation Forest KullanÄ±lmalÄ±?

* **HÄ±zlÄ± ve Ã–lÃ§eklenebilir:** BÃ¼yÃ¼k ve yÃ¼ksek boyutlu verilerle bile iyi Ã§alÄ±ÅŸÄ±r.
* **DaÄŸÄ±lÄ±m VarsayÄ±mÄ± Yok:** Verinin belirli bir istatistiksel daÄŸÄ±lÄ±mÄ± (Ã¶rneÄŸin normal daÄŸÄ±lÄ±m) takip ettiÄŸini varsaymaz.

---

## ğŸ“ 2. Local Outlier Factor (LOF)

**LOF (Yerel AykÄ±rÄ± FaktÃ¶r)**, **yoÄŸunluk tabanlÄ± (density-based)** bir yÃ¶ntemdir. Bir alanÄ±n ne kadar kalabalÄ±k olduÄŸuna bakar ve o alana "uymayan" noktalarÄ± tespit eder.

### Temel Ã‡alÄ±ÅŸma Prensibi

LOF, bir noktanÄ±n kendi yerel yoÄŸunluÄŸunu (local density), komÅŸularÄ±nÄ±n yerel yoÄŸunluklarÄ± ile karÅŸÄ±laÅŸtÄ±rarak Ã§alÄ±ÅŸÄ±r.

ğŸ‘‰ **Ã‡alÄ±ÅŸma AdÄ±mlarÄ±:**

1.  Her nokta iÃ§in, en yakÄ±n komÅŸularÄ±na (nearest neighbors) dayalÄ± olarak **yerel yoÄŸunluÄŸu** hesaplanÄ±r.
2.  NoktanÄ±n yoÄŸunluÄŸu, komÅŸularÄ±nÄ±n yoÄŸunluklarÄ±yla karÅŸÄ±laÅŸtÄ±rÄ±lÄ±r.
3.  EÄŸer bir nokta, komÅŸularÄ±na gÃ¶re **Ã§ok daha az yoÄŸunsa** (yani komÅŸularÄ±ndan daha izole bir bÃ¶lgedeyse), **LOF deÄŸeri yÃ¼ksek Ã§Ä±kar** ve bu nokta anomali olarak iÅŸaretlenir.

> 
> **Ã–rnek:** Veri setinde yoÄŸun bir kÃ¼menin kenarÄ±nda yer alan bir nokta, kÃ¼resel olarak normal gÃ¶rÃ¼nebilir (Ã§Ã¼nkÃ¼ genel olarak veriye yakÄ±ndÄ±r), ancak hemen yanÄ±ndaki komÅŸularÄ±na kÄ±yasla daha seyrek bir konumdadÄ±r. LOF, bu tÃ¼r **yerel anomalileri** yakalamakta mÃ¼kemmeldir.

### âœ… Neden LOF KullanÄ±lmalÄ±?

* **Yerel Anomali Tespiti:** YalnÄ±zca belirli bir mahallede (komÅŸulukta) sÄ±ra dÄ±ÅŸÄ± olan **baÄŸlamsal anomalileri (contextual anomalies)** yakalamak iÃ§in idealdir.
* **BaÄŸlam Yakalama:** Global yÃ¶ntemlerin gÃ¶zden kaÃ§Ä±rabileceÄŸi yerel yoÄŸunluk farklÄ±lÄ±klarÄ±nÄ± yakalar.

---

## âš–ï¸ KarÅŸÄ±laÅŸtÄ±rma ve Ã–zet

| Ã–zellik | Isolation Forest ğŸŒ² | Local Outlier Factor (LOF) ğŸ“ |
| :--- | :--- | :--- |
| **Temel Mekanizma** | **Ä°zolasyon (AÄŸaÃ§ TabanlÄ±)**. Rastgele bÃ¶lmelerle hÄ±zlÄ± izolasyon. | **Yerel YoÄŸunluk KarÅŸÄ±laÅŸtÄ±rmasÄ±**. NoktanÄ±n yoÄŸunluÄŸunu komÅŸularÄ±yla kÄ±yaslama. |
| **Anomali Tipi** | **Global AykÄ±rÄ± DeÄŸerler** (Veri yÄ±ÄŸÄ±nÄ±nÄ±n uzaÄŸÄ±ndaki noktalar). | **Yerel/BaÄŸlamsal AykÄ±rÄ± DeÄŸerler** (KomÅŸularÄ±na gÃ¶re seyrek olan noktalar). |
| **HÄ±z/Ã–lÃ§eklenebilirlik** | **Ã‡ok HÄ±zlÄ± ve Ã–lÃ§eklenebilir** (BÃ¼yÃ¼k veri setleri iÃ§in uygundur). | **Daha YavaÅŸ** (KomÅŸu mesafesi hesaplamasÄ± gerektirir). |
| **Parametreler** | `n_estimators`, `contamination`, `max_samples`. | **k** (KomÅŸu sayÄ±sÄ±, `n_neighbors`), `contamination`. |

### â˜ğŸ½ Ana Ã‡Ä±karÄ±mlar

* **Isolation Forest:** Veri setinin Ã§oÄŸunluÄŸundan uzakta oturan **global aykÄ±rÄ± deÄŸerleri** hÄ±zlÄ± ve verimli bir ÅŸekilde bulur.
* **LOF:** **Yerel/baÄŸlamsal anomalileri** (komÅŸularÄ±na baÄŸlÄ± olan) bulmakta gÃ¼Ã§lÃ¼dÃ¼r.

Bu iki yÃ¶ntem birbirini tamamlar ve farklÄ± senaryolarda kullanÄ±ÅŸlÄ±dÄ±r: Ã–rneÄŸin, siber gÃ¼venlikte **Isolation Forest** global siber saldÄ±rÄ±larÄ± yakalarken, **LOF** bir kullanÄ±cÄ±nÄ±n yerel olarak sÄ±ra dÄ±ÅŸÄ± gÃ¶rÃ¼nen kÃ¼Ã§Ã¼k davranÄ±ÅŸ deÄŸiÅŸikliklerini iÅŸaretleyebilir.

---

