# Classification Metrics

# 📉 Model Değerlendirmesi: Bir Modelin İyi Olduğunu Nasıl Anlarız?

Model değerlendirmesi, bir makine öğrenimi modelinin gerçek dünya verilerinde ne kadar iyi performans gösterdiğini anlamak için kritik öneme sahiptir. Yalnızca tahmin yapması yeterli değildir; bu tahminlerin **kullanışlı** ve **güvenilir** olması gerekir.

---

## 📋 Temel Kavramlar ve Metrikler Tablosu

| Konu/Başlık | Açıklama | Görsel/Emoji |
| :--- | :--- | :--- |
| **Değerlendirmenin Önemi** | Bir modelin her zaman tahmin yapabilmesine rağmen, tüm tahminler kullanışlı değildir. Örneğin, bir modelin hayatta kalma oranının %62 olduğu Titanic verisinde "herkes öldü" demesi %62 doğruluk sağlar ancak **hayatta kalanları asla bulamadığı için işe yaramaz** bir modeldir. Bu, doğru metriklerin önemini gösterir. | 🚢🤷‍♀️ |
| **Veri Bölme: Eğitim vs. Test** | Modeli değerlendirmeden önce, görmediği veriler üzerinde test edildiğinden emin olmalıyız. Veri seti ikiye ayrılır: <ul><li>**Eğitim Seti:** Modeli **öğretmek** için kullanılır.</li><li>**Test Seti:** Modelin **yeni verilerdeki** performansını kontrol etmek için kullanılır.</li></ul>Aynı veride test etmek, modelin cevapları ezberlemesine ($\approx$ **Aşırı Uyum/Overfitting**) yol açar ve gerçek performansı göstermez. | 🧠➡️📝 |
| **Sınıflandırma Metriği: Doğruluk (Accuracy)** | En basit sınıflandırma değerlendirme metriğidir. Modelin **doğru yaptığı tahminlerin yüzdesidir.** <ul><li>**Formül:** $\text{Doğruluk} = \frac{\text{Doğru Tahmin Sayısı}}{\text{Toplam Tahmin Sayısı}}$</li><li>**Örnek:** 100 tahminden 85'i doğruysa, Doğruluk = %85.</li></ul> | ✅💯 |
| **⚠️ Doğruluk (Accuracy) ile İlgili Sorunlar** | Doğruluk iyi bir başlangıç olsa da, birçok durumda **yanıltıcı** olabilir ve daha detaylı araçlar (örn. Karışıklık Matrisi) gerektirir: | 🚨❌ |
| **Dengesiz Veri (Imbalanced Data)** | Veri sınıfları arasında büyük fark varsa (örn. dolandırıcılık tespiti: %99 "dolandırıcılık değil"), modelin her zaman "dolandırıcılık değil" tahmin etmesi %99 doğruluk verir, ancak **dolandırıcılığı asla yakalamadığı için işe yaramaz.** | ⚖️📉 |
| **Farklı Hata Maliyetleri** | Hatalar her zaman eşit derecede kötü değildir. Tıbbi teşhiste, hasta birini sağlıklı tahmin etmek (**yanlış negatif**) **hayatî tehlike** yaratabilirken, sağlıklı birini hasta tahmin etmek (**yanlış pozitif**) sadece rahatsızlık verir. Doğruluk bu hatalar arasındaki farkı gözetmez. | 🩺💔 |
| **Modelin Nerede Başarısız Olduğunu Gizlemesi** | Doğruluk tek bir sayı verir. Modelin yaptığı hataların **türünü** (örn. Titanic'te hayatta kalanı mı kaçırıyor, yoksa öleni mi yanlış tahmin ediyor?) göstermez. | 🔎❓ |
| **Sınıf Dağılımı Değişikliklerine Duyarsızlık** | Sınıflar arasındaki denge zamanla değişirse (örn. dolandırıcılık %1'den %10'a çıkarsa), önceden "doğru" görünen bir model aniden kötü performans gösterebilir. Doğruluk bu değişimi tek başına yeterince hızlı bir şekilde uyarmayabilir. | 🔄📢 |

# Confusion Matrix

<img width="567" height="330" alt="image" src="https://github.com/user-attachments/assets/e12e9ef5-0d47-466b-84d1-b92a347b8d9a" />

A **confusion matrix** is a simple table that shows how many predictions your model got right, and what kinds of errors it made.

# 📊 Karışıklık Matrisi (Confusion Matrix) Nedir?

Karışıklık Matrisi, bir sınıflandırma modelinin yaptığı doğru tahminlerin sayısını ve **ne tür hatalar** yaptığını gösteren basit ama güçlü bir tablodur. Modelin performansına dair **tam bir resim** sunar.

---

## 🧭 Karışıklık Matrisinin Yapısı ve Mantığı

| Kavram | Açıklama | Örnek Durum (Spam Tespiti) | Sonuç/Durum | Emoji |
| :--- | :--- | :--- | :--- | :--- |
| **Doğru Pozitif (TP)** | Model, pozitif sınıfı **doğru** tahmin etti. | Model, bir e-postayı **SPAM** olarak tahmin etti ve e-posta **gerçekten SPAM'di**. | Başarı, Doğru Tespit | ✅🎯 |
| **Doğru Negatif (TN)** | Model, negatif sınıfı **doğru** tahmin etti. | Model, bir e-postayı **SPAM DEĞİL** olarak tahmin etti ve e-posta **gerçekten SPAM DEĞİLDİ**. | Başarı, Doğru Reddetme | ✅🛡️ |
| **Yanlış Pozitif (FP)** | Model pozitif tahmin etti, ancak **gerçekte negatif'ti** ("Yanlış Alarm"). | Model, bir e-postayı **SPAM** olarak tahmin etti ancak e-posta **gerçekte SPAM DEĞİLDİ** (Önemli bir e-postanın kaçırılması). | Hata (Tip I), Yanlış Alarm | 🛑🔔 |
| **Yanlış Negatif (FN)** | Model negatif tahmin etti, ancak **gerçekte pozitif'ti** ("Gözden Kaçırma"). | Model, bir e-postayı **SPAM DEĞİL** olarak tahmin etti ancak e-posta **gerçekte SPAM'di** (Gereksiz e-postanın gelen kutusuna düşmesi). | Hata (Tip II), Gözden Kaçırma | ❌🙈 |

---

## ⚙️ Karışıklık Matrisi Nasıl Çalışır?

1. **Tahmin Üretme:** Modelinizden test verileri için tahminler ($y_{tahmin}$) alırsınız.
2. **Karşılaştırma:** Bu tahminleri, verinin **gerçek etiketleri** ($y_{gerçek}$) ile tek tek karşılaştırırsınız.
3. **Kategorilendirme:** Her bir tahmin, gerçek etikete göre TP, TN, FP veya FN kategorilerinden birine yerleştirilir.

Modelin yalnızca **doğru mu yanlış mı** tahmin ettiğine değil; **ne tür bir hata** yaptığına (Yanlış Pozitif mi, Yanlış Negatif mi) odaklanılır.

### Örnek Tablo Düzeni

Karışıklık matrisinin geleneksel yapısı (etiketlerin yerleşimi farklı kaynaklarda değişebilir, ancak mantık aynı kalır):

| | **Tahmin Edilen Pozitif** | **Tahmin Edilen Negatif** |
| :--- | :--- | :--- |
| **Gerçek Pozitif** | **Doğru Pozitif (TP)** | **Yanlış Negatif (FN)** |
| **Gerçek Negatif** | **Yanlış Pozitif (FP)** | **Doğru Negatif (TN)** |

> **Unutmayın:** Bazı kaynaklar satırları "Gerçek" ve sütunları "Tahmin Edilen" olarak alırken, bazıları tam tersini kullanır. Önemli olan, her hücredeki tanımın (TP, TN, FP, FN) neyi temsil ettiğini anlamaktır.
>
> # 🔍 Karışıklık Matrisi Uygulamaları: Dolandırıcılık vs. Spam

Karışıklık Matrisi, iki farklı ikili sınıflandırma probleminde (Dolandırıcılık Tespiti ve Spam Sınıflandırması) modelin yaptığı hataların türlerini ve önem derecelerini anlamak için kullanılır.

---

## 🔬 Karşılaştırmalı Hata Analizi Tablosu

| Kavram | Tipi | 1. Örnek: Dolandırıcılık Tespiti (Pozitif = Dolandırıcılık) | 2. Örnek: Spam Sınıflandırması (Pozitif = Spam) | Emoji |
| :--- | :--- | :--- | :--- | :--- |
| **Doğru Pozitif (TP)** | ✅ Doğru Tahmin | **Gerçek Dolandırıcılık** doğru şekilde **DOLANDIRICILIK** olarak işaretlendi. | **Gerçek Spam** doğru şekilde **SPAM** olarak işaretlendi. | 🎯💰 |
| **Doğru Negatif (TN)** | ✅ Doğru Tahmin | **Normal İşlem** doğru şekilde **NORMAL** olarak tanımlandı. | **Gerçek E-posta** doğru şekilde **SPAM DEĞİL** olarak sınıflandırıldı. | 🛡️📧 |
| **Yanlış Pozitif (FP)** | ❌ Tip 1 Hata | **Normal İşlem** yanlışlıkla **DOLANDIRICILIK** olarak işaretlendi. (Yanlış Alarm). | **Gerçek E-posta** yanlışlıkla **SPAM** olarak işaretlendi. (Kullanıcı için can sıkıcı). | 🔔🛑 |
| **Yanlış Negatif (FN)** | ❌ Tip 2 Hata | **Gerçek Dolandırıcılık** yanlışlıkla **NORMAL** işlem olarak gözden kaçırıldı. (Kaçırılan Vaka). | **Gerçek Spam** yanlışlıkla **SPAM DEĞİL** olarak sınıflandırıldı. (Gelen kutusuna düşen spam, **tehlikeli**). | 🚨🙈 |

---

## ⚖️ Hata Türlerinin Önemi ve Ölçeklendirme

### 1. Dolandırıcılık Tespiti Bağlamı

* **Pozitif Sınıf:** Dolandırıcılık (`Fraud`).
* **Önem:** **Gerçek dolandırıcılığı yakalamak (TP)**, yanlış alarm vermekten (FP) daha önemlidir.
* **FN Maliyeti:** Modelin gerçek dolandırıcılığı kaçırması büyük finansal kayıplara yol açabilir.

### 2. Spam Sınıflandırması Bağlamı

* **Pozitif Sınıf:** Spam.
* **FP Maliyeti:** Gerçek bir e-postanın spam kutusuna düşmesi (**FP**), kullanıcının önemli bilgileri kaçırmasına neden olur (Can sıkıcı).
* **FN Maliyeti:** Bir spam e-postanın gelen kutusuna düşmesi (**FN**), kullanıcıyı potansiyel tehlikeye (kimlik avı, virüs) maruz bırakır (Tehlikeli).

### Sonraki Adımlar

Karışıklık Matrisi, doğru ve yanlış tahminlerin **mutlak sayılarını** gösterir. Bu, haftalık bazda kaç e-postanın yanlışlıkla spam'e gönderildiği gibi ölçek hakkında fikir edinmek için kullanışlıdır.

Ancak, modelleri karşılaştırmak veya zaman içindeki performanslarını izlemek için **mutlak sayılar yerine göreceli metrikler** gereklidir. Bu kalite metrikleri (Doğruluk, Duyarlılık/Recall, Kesinlik/Precision, F1 Skoru) doğrudan Karışıklık Matrisi'nden türetilebilir.
